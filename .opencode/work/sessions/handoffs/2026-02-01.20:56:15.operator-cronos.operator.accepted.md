# Handoff: OPR-H-0005 Directory Reorganization

**From:** Operator (Cronos)  
**To:** Operator (any)  
**Date:** 2026-02-01 21:10:00  
**Status:** PENDING  
**Priority:** HIGH  
**Task ID:** OPR-H-0005

---

## Summary

Task OPR-H-0005: Consolidate and reorganize `.opencode/` directory structure

**Status:** Planning complete, ready for implementation  
**Estimated effort:** 2-3 hours  

**Task Artifact:** `.opencode/planning/OPR-H-0005.md` (contains complete analysis and plan)

---

## What Was Done

1. **Documentation cleanup completed** by Athena (Manager):
   - All `pm` → `s9` references updated
   - Genericized CROL-specific content
   - Committed at 20:46:03

2. **OPR-H-0005 Planning completed** by Cronos (Operator):
   - Claimed task at 20:46:45
   - Analyzed current `.opencode/` structure (identified 5 problems)
   - Proposed 3 reorganization options
   - User selected Option A (Modified): `docs/` + `work/` structure
   - Identified code changes needed (3 Python files + templates)
   - Created detailed implementation plan (3 phases)
   - Created complete task artifact: `.opencode/planning/OPR-H-0005.md`

3. **Partial code change made** (premature):
   - `src/s9/cli/init.py` line 70: Updated comment before being told to wait
   - This needs to be part of complete update

---

## What Needs to Be Done

### Overview

Reorganize `.opencode/` from flat structure to semantic organization:

**New structure:**
```
.opencode/
├── docs/        # Static instructions (agents, commands, guides, procedures, skills)
├── work/        # Tracking documents (sessions, tasks, planning)
├── data/        # Database (unchanged)
└── scripts/     # Utilities (unchanged)
```

### Two-Phase Implementation

**Phase 1: Update s9 Code (DO FIRST)**
1. Update `src/s9/cli/init.py` (lines 70, 92-129, 140, 170)
2. Update `src/s9/agents/sessions.py` (line 51)
3. Update `src/s9/tasks/manager.py` (line 94)
4. Reorganize `src/s9/templates/base/` directory structure
5. Test `s9 init` in temp directory
6. Commit code changes

**Phase 2: Migrate Current .opencode/**
1. Create `docs/` and `work/` directories
2. Move files using `git mv` (preserves history)
3. Update `.opencode/README.md`
4. Update `.gitignore` for node_modules
5. Test all functionality
6. Commit migration changes
7. Mark task COMPLETE

---

## Key Files

**Read first:**
- `.opencode/planning/OPR-H-0005.md` - Complete analysis, decisions, detailed plan

**Code files to modify:**
- `src/s9/cli/init.py` - Template mappings, directory creation
- `src/s9/agents/sessions.py` - Session file path
- `src/s9/tasks/manager.py` - Task artifact path
- `src/s9/templates/base/` - Directory reorganization

**Current state:**
- Branch: main
- Uncommitted changes present
- One partial edit in init.py (line 70)

---

## Important Notes

1. **Order matters:** Code changes MUST come before directory migration
2. **Breaking change:** This affects all future `s9 init` projects  
3. **Use git mv:** Preserves file history
4. **Test thoroughly:** Both code and migration need verification
5. **This handoff will move:** To `work/sessions/handoffs/` during migration
6. **Task artifact will move:** To `work/tasks/OPR-H-0005.md` during migration

---

## Acceptance Criteria

**Code Changes:**
- [ ] All 3 Python files updated with new paths
- [ ] Template directory reorganized
- [ ] `s9 init` tested in temp directory
- [ ] New structure verified (docs/, work/, data/, scripts/)
- [ ] Code changes committed

**Migration:**
- [ ] New directories created in .opencode/
- [ ] All files moved with `git mv`
- [ ] README.md updated
- [ ] .gitignore updated
- [ ] All functionality tested
- [ ] Migration committed
- [ ] Task OPR-H-0005 marked COMPLETE

---

## Next Steps

1. Read `.opencode/planning/OPR-H-0005.md` for complete details
2. Update s9 code files (init.py, sessions.py, manager.py)
3. Reorganize template directory
4. Test s9 init
5. Commit code changes
6. Migrate .opencode/ directory
7. Test functionality
8. Commit migration
9. Mark task COMPLETE

---

**Session File:** `.opencode/sessions/2026-02-01.19:32:01.operator.cronos.initial-session.md`

---

*Ready for next operator!*
