# Task ENG-M-0039: Add epic filtering and display to dashboard

**Status:** COMPLETE
**Priority:** MEDIUM
**Role:** Engineer
**Category:** feature
**Mission:** 55
**Claimed:** 2026-02-04 16:38:50
**Actual Time:** 
**Closed:** 2026-02-04 16:39:25
**Paused:** 
## Objective

Add --epic flag to s9 dashboard to filter tasks by epic, show epic progress in dashboard views

## Problem Statement

The dashboard command (`s9 dashboard`) showed tasks and missions but had no visibility into epics. Users couldn't:
- See active epics and their progress in the main dashboard
- Filter to view all tasks belonging to a specific epic
- Track epic completion status at a glance

## Implementation Steps

### Implementation (2026-02-04)

1. **Added EpicManager import** to dashboard.py (line 11)
   - Required to access epic data

2. **Added `--epic` parameter** to dashboard_command (line 18)
   - Signature: `--epic <EPIC_ID>` or `-e <EPIC_ID>`
   - Allows filtering dashboard to show only tasks from a specific epic

3. **Implemented epic-filtered dashboard view** (lines 37-103)
   - Displays when `--epic` flag is provided
   - Shows epic header with: ID, title, status (color-coded), priority
   - Displays progress bar and task completion stats
   - Shows subtasks table with: ID, title, status, role, priority, mission
   - Returns early to skip full dashboard display

4. **Added "Active Epics" section** to full dashboard (lines 235-268)
   - Displays top 5 active epics (TODO or UNDERWAY status)
   - Shows: ID, title, status, priority, progress (N/M tasks, X%)
   - Sorted by priority (CRITICAL > HIGH > MEDIUM > LOW)
   - Includes helpful hints for viewing epic details and tasks

5. **Added progress bar helper function** (lines 277-282)
   - Generates visual progress bar: `[████████░░░░░░] 60%`
   - Color-coded: green (100%), cyan (>50%), yellow (>0%), dim (0%)
   - Configurable width (default 40 characters)

### Design Decisions

- **Epic filter takes precedence**: When `--epic` is specified, only show epic-specific view (skip full dashboard)
- **Color-coded progress bar**: Visual feedback on completion status
- **Top 5 active epics**: Limit to most relevant epics to avoid clutter
- **Helpful hints**: Command suggestions at bottom of epics table
- **Priority sorting**: Most important epics shown first

## Files Changed

### Modified
- `src/site_nine/cli/dashboard.py`:
  - Added EpicManager import (line 11)
  - Added --epic parameter to dashboard_command (line 18)
  - Added epic-filtered dashboard view (lines 37-103)
  - Added Active Epics table to full dashboard (lines 235-268)
  - Added _generate_progress_bar helper function (lines 277-282)

## Testing Performed

All functionality tested with real data:

```bash
# Test 1: Epic-filtered dashboard
s9 dashboard --epic EPC-H-0002
# Result: Shows epic header with progress bar and subtasks table
#   Epic EPC-H-0002: Task Linking Test Epic
#   Status: TODO
#   Priority: HIGH
#   Progress: 0/1 tasks (0%)
#   [Progress bar displayed]
#   [Subtasks table with 1 task]

# Test 2: Full dashboard with epics section
s9 dashboard
# Result: Shows all sections including new "Active Epics" table
#   [Available Tasks table]
#   [Open Missions table]
#   [Quick Stats table]
#   [Active Epics table] ← NEW
#     EPC-H-0002   Task Linking Test Epic   TODO   HIGH   0/1 (0%)
#     EPC-M-0003   Markdown Generation Test TODO   MEDIUM No tasks
#   [Helpful hints displayed]

# Test 3: Role filtering still works
s9 dashboard --role Engineer
# Result: Shows only Engineer tasks (epics section not shown in role view)

# Test 4: Invalid epic ID
s9 dashboard --epic EPC-H-9999
# Result: Error: Epic EPC-H-9999 not found
```

**Features verified**:
- ✅ Epic-filtered dashboard shows epic details and subtasks
- ✅ Progress bar displays with correct percentage
- ✅ Active epics section appears in full dashboard
- ✅ Epics sorted by priority (HIGH before MEDIUM)
- ✅ Progress stats show "N/M (X%)" format
- ✅ Color-coded status and progress bars
- ✅ Helpful command hints displayed
- ✅ Role filtering still works correctly
- ✅ Error handling for invalid epic IDs

## Notes

- Epic filter (`--epic`) is independent from role filter (`--role`)
- When `--epic` is specified, only epic-specific view is shown (not full dashboard)
- Active Epics section only shows TODO and UNDERWAY epics (not COMPLETE or ABORTED)
- Progress bar width is 40 characters (optimized for terminal display)
- Epics with no tasks show "No tasks" instead of "0/0 (0%)"
- This completes the epic system feature set for Engineer role