# Epic EPC-H-0004: Multi-Tool Adapter System

**Status:** ðŸš§ UNDERWAY
**Priority:** HIGH
**Created:** 2026-02-04 16:58:16
**Updated:** 2026-02-04 17:15:58

## Progress

**Tasks:** 3/10 complete (30%)
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 30%

## Subtasks

| Task ID | Title | Status | Role | Priority |
|---------|-------|--------|------|----------|
| ADM-H-0029 | Research making site-nine tool-agnostic for multiple AI coding tools | âœ… COMPLETE | Administrator | HIGH |
| ADM-H-0051 | Create implementation tasks for multi-tool adapter system | âœ… COMPLETE | Administrator | HIGH |
| ARC-H-0030 | Design tool-agnostic architecture for site-nine multi-tool support | âœ… COMPLETE | Architect | HIGH |
| ARC-H-0057 | Design ToolAdapter protocol and OpenCodeAdapter implementation | â¬œ TODO | Architect | HIGH |
| DOC-M-0070 | Document adapter pattern implementation and usage | â¬œ TODO | Documentarian | MEDIUM |
| OPR-H-0065 | Create adapters package structure and ToolAdapter protocol | â¬œ TODO | Operator | HIGH |
| OPR-H-0066 | Implement OpenCodeAdapter wrapper | â¬œ TODO | Operator | HIGH |
| OPR-H-0067 | Implement ToolRegistry for auto-detecting active tool | â¬œ TODO | Operator | HIGH |
| OPR-H-0068 | Integrate ToolRegistry into core site-nine code | â¬œ TODO | Operator | HIGH |
| TST-H-0069 | Write tests for ToolAdapter protocol and OpenCodeAdapter | â¬œ TODO | Tester | HIGH |

## Related Architecture

| ADR ID | Title | Status | Path |
|--------|-------|--------|------|
| ADR-001 | Adapter Pattern for Tool Abstraction | PROPOSED | .opencode/docs/adrs/ADR-001-adapter-pattern-abstraction.md |
## Description

Implement the adapter pattern to enable site-nine to work with multiple AI coding tools (OpenCode, GitHub Copilot CLI, Claude Code, Crush, and future tools). This epic encompasses the architecture design, implementation, testing, and documentation of the ToolAdapter protocol and concrete adapters. Reference: ADR-001

## Goals

- Design and implement ToolAdapter protocol that abstracts tool-specific functionality
- Create OpenCodeAdapter wrapping existing OpenCode behavior (zero regression)
- Implement ToolRegistry for auto-detecting active AI coding tool
- Establish foundation for future tool adapters (Copilot CLI, Claude Code, Crush)
- Document adapter pattern for community contributions

## Success Criteria

- ToolAdapter protocol defined with clear interface methods
- OpenCodeAdapter fully functional with all existing site-nine features working
- ToolRegistry successfully detects and loads OpenCode adapter
- All current tests pass with adapter layer in place
- Architecture documentation (ADR-001) is complete and approved
- Implementation tasks created for Engineer/Operator roles

## Related Architecture

- **ADR-001**: Adapter Pattern for Tool Abstraction (.opencode/docs/adrs/ADR-001-adapter-pattern-abstraction.md)
  - Defines the architecture decision and rationale
  - Outlines Phase 1-5 implementation strategy
  - Documents alternatives considered and consequences

## Notes

This epic represents Phase 1 of the adapter pattern implementation as outlined in ADR-001. The focus is on establishing the foundation (protocol, OpenCode adapter, registry) without breaking any existing functionality.

Future epics will handle:
- Phase 2: Alternative tool adapters (Copilot CLI, Claude Code, Crush)
- Phase 3: Configuration system
- Phase 4: Skills refactoring
- Phase 5: Comprehensive documentation updates
